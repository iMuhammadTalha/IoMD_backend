CREATE DATABASE iomd;

CREATE TABLE IF NOT EXISTS public.admin
(
    id bigint NOT NULL,
    name character(255) NOT NULL,
    email character(255) NOT NULL,
    password character(255) NOT NULL,
    CONSTRAINT admin_pkey PRIMARY KEY (id)
)
ALTER TABLE public.admin
    OWNER to postgres;


CREATE TABLE IF NOT EXISTS public.doctor
(
    id bigserial NOT NULL,
    name text NOT NULL,
    pmdc_no text,
    contact_no text NOT NULL,
    email text NOT NULL,
    specialization text,
    password text NOT NULL,
    created_at timestamp with time zone NOT NULL,
    PRIMARY KEY (id)
);

ALTER TABLE public.doctor
    OWNER to postgres;

    

CREATE TABLE IF NOT EXISTS public.patient
(
    id bigserial NOT NULL,
    doctor_id bigserial,
    name text NOT NULL,
    date_of_birth date,
    gender text NOT NULL,
    contact_no text NOT NULL,
    email text NOT NULL,
    address text,
    city text,
    height integer,
    weight integer,
    password text NOT NULL,
    created_at timestamp with time zone NOT NULL,
    PRIMARY KEY (id),
    FOREIGN KEY (doctor_id)
        REFERENCES public.doctor (id) MATCH SIMPLE
        ON UPDATE RESTRICT
        ON DELETE RESTRICT
        NOT VALID
);

ALTER TABLE public.patient
    OWNER to postgres;



CREATE TABLE IF NOT EXISTS public.caretaker
(
    id bigserial NOT NULL,
    name text NOT NULL,
    contact_no text NOT NULL,
    email text NOT NULL,
    patient_id bigserial NOT NULL,
    password text NOT NULL,
    created_at timestamp with time zone,
    PRIMARY KEY (id),
    FOREIGN KEY (patient_id)
        REFERENCES public.patient (id) MATCH SIMPLE
        ON UPDATE CASCADE
        ON DELETE CASCADE
        NOT VALID
);

ALTER TABLE public.caretaker
    OWNER to postgres;